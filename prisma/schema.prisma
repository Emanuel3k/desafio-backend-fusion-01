generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model StarSystem {
  id          String   @id @default(uuid(7))
  name        String
  planets     Planet[]
  description String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([id])
  @@map("star_systems")
}

model Planet {
  id           String      @id @default(uuid(7))
  name         String
  climate      String
  terrain      String
  Character    Character[]
  population   Int
  StarSystem   StarSystem  @relation(fields: [starSystemId], references: [id], onDelete: Cascade)
  starSystemId String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([id, starSystemId])
  @@map("planets")
}

model Character {
  id           String      @id @default(uuid(7))
  name         String
  specie       String
  Spaceship    Spaceship[]
  afiliation   String
  HomePlanet   Planet      @relation(fields: [homePlanetId], references: [id], onDelete: Cascade)
  homePlanetId String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([id, homePlanetId])
  @@map("characters")
}

model Spaceship {
  id           String    @id @default(uuid(7))
  name         String
  owner        Character @relation(fields: [ownerId], references: [id], onDelete: Cascade)
  model        String
  ownerId      String
  capacity     Int
  manufacturer String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([id, ownerId])
  @@map("spaceships")
}
